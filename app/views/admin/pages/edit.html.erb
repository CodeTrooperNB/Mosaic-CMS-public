<% content_for :page_title, "Edit Page" %>

<div class="max-w-2xl mx-auto">
  <div class="bg-card border border-border rounded-lg shadow-sm">
    <div class="border-b border-border px-6 py-4">
      <div class="flex items-center gap-2">
        <%= action_icon("edit", class: "w-5 h-5 text-muted-foreground") %>
        <h1 class="text-lg font-semibold text-card-foreground">Edit Page</h1>
      </div>
      <p class="text-sm text-muted-foreground mt-1">Make changes to "<%= @page.title %>"</p>
    </div>

    <div class="p-6">
      <% if @page.errors.any? %>
        <div class="mb-6 border border-destructive/20 bg-destructive/10 rounded-md p-4">
          <div class="flex gap-3">
            <%= status_icon("error", class: "w-5 h-5 text-destructive shrink-0 mt-0.5") %>
            <div>
              <h3 class="font-medium text-destructive text-sm">Please fix the following errors:</h3>
              <ul class="mt-2 text-sm text-destructive space-y-1">
                <% @page.errors.full_messages.each do |msg| %>
                  <li class="flex items-start gap-1">
                    <span class="text-destructive mt-1">â€¢</span>
                    <%= msg %>
                  </li>
                <% end %>
              </ul>
            </div>
          </div>
        </div>
      <% end %>

      <%= render "admin/pages/form" %>

      <div class="mt-6 pt-6 border-t border-border">
        <div class="flex items-center justify-between">
          <div class="text-sm text-muted-foreground">Danger zone</div>
          <%= button_to admin_page_path(@page), method: :delete,
                        form: { data: { turbo_confirm: "Delete '#{@page.title}'? This action cannot be undone." } },
                        class: "btn-danger-sm" do %>
            <%= action_icon("delete", class: "w-4 h-4 text-white") %>
            Delete Page
          <% end %>
        </div>
      </div>
    </div>
  </div>
</div>