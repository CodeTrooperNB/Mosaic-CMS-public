<% content_for :page_title, 'Sign In' %>
<% content_for :page_subtitle, 'Access your Mosaic CMS dashboard' %>

<%= form_with(model: resource, as: resource_name, url: session_path(resource_name), local: true, data: { turbo: false },
              html: {
                class: "space-y-6",
                "data-controller": "admin--form",
                "data-admin--form-loading-value": "Signing in...",
                "data-action": "submit->admin--form#submit"
              }) do |f| %>
  <div>
    <%= f.label :email, class: "block text-sm font-medium text-card-foreground mb-2" %>
    <%= f.email_field :email,
                      autofocus: true,
                      autocomplete: "email",
                      required: true,
                      "data-admin--form-target": "field",
                      "data-action": "input->admin--form#clearError",
                      class: "block w-full rounded-lg border border-input bg-background px-3 py-2 text-sm text-foreground placeholder-muted-foreground focus:border-ring focus:outline-none focus:ring-2 focus:ring-ring/20 transition-colors",
                      placeholder: "Enter your email address" %>
  </div>

  <div data-controller="admin--password-toggle">
    <%= f.label :password, class: "block text-sm font-medium text-card-foreground mb-2" %>
    <div class="relative">
      <%= f.password_field :password,
                           autocomplete: "current-password",
                           required: true,
                           "data-admin--form-target": "field",
                           "data-admin--password-toggle-target": "field",
                           "data-action": "input->admin--form#clearError",
                           class: "block w-full rounded-lg border border-input bg-background px-3 py-2 pr-10 text-sm text-foreground placeholder-muted-foreground focus:border-ring focus:outline-none focus:ring-2 focus:ring-ring/20 transition-colors",
                           placeholder: "Enter your password" %>
      <button type="button"
              data-admin--password-toggle-target="toggle"
              data-action="click->admin--password-toggle#toggle keydown->admin--password-toggle#keydown"
              tabindex="-1"
              class="absolute inset-y-0 right-0 flex items-center pr-3 text-muted-foreground hover:text-foreground transition-colors">
        <span class="sr-only">Toggle password visibility</span>
        <svg data-admin--password-toggle-target="eyeIcon" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" />
        </svg>
        <svg data-admin--password-toggle-target="eyeOffIcon" class="h-4 w-4 hidden" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21" />
        </svg>
      </button>
    </div>
  </div>

  <% if devise_mapping.rememberable? %>
    <div class="flex items-center">
      <%= f.check_box :remember_me, class: "h-4 w-4 rounded border-input text-primary focus:ring-2 focus:ring-ring focus:ring-offset-0" %>
      <%= f.label :remember_me, class: "ml-2 block text-sm text-card-foreground" %>
    </div>
  <% end %>

  <div>
    <%= f.submit "Sign In",
                 "data-admin--form-target": "submit",
                 class: "w-full flex justify-center py-2.5 px-4 border border-transparent rounded-lg text-sm font-medium text-primary-foreground bg-primary hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-ring/20 focus:ring-offset-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed" %>
  </div>
<% end %>

<div class="mt-6 text-center">
  <% if devise_mapping.recoverable? && controller_name != 'passwords' && controller_name != 'registrations' %>
    <%= link_to "Forgot your password?",
                new_password_path(resource_name),
                class: "text-sm text-muted-foreground hover:text-foreground underline underline-offset-4 transition-colors" %>
  <% end %>

  <div class="text-xs text-muted-foreground mt-3">
    Need access? Contact your system administrator.
  </div>
</div>