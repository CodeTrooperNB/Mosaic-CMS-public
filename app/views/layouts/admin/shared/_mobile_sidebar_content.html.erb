<!-- Logo section -->
<div class="flex h-16 shrink-0 items-center justify-between px-6 border-b border-sidebar-border">
  <div class="flex items-center gap-3">
    <div class="h-8 w-8 flex items-center justify-center flex-shrink-0">
      <%= mosaic_logo("mosaic-logo", class: "h-8 w-8 text-primary") %>
    </div>
    <div class="text-lg font-bold text-sidebar-foreground">Mosaic CMS</div>
  </div>

  <!-- Mobile close button -->
  <button type="button"
          class="p-2 text-sidebar-foreground hover:text-sidebar-accent-foreground rounded-lg hover:bg-sidebar-accent transition-colors"
          data-action="click->admin--admin-layout#closeMobileSidebar">
    <span class="sr-only">Close sidebar</span>
    <svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
      <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
    </svg>
  </button>
</div>

<!-- User info section -->
<div class="border-b border-sidebar-border px-6 py-4">
  <div class="flex items-center gap-3">
    <div class="w-10 h-10 rounded-full bg-primary/10 text-primary flex items-center justify-center shrink-0">
      <span class="text-sm font-semibold">
        <%= current_admin_user.first_name&.first&.upcase %><%= current_admin_user.last_name&.first&.upcase %>
      </span>
    </div>
    <div class="min-w-0">
      <div class="text-sm font-medium text-sidebar-foreground truncate">
        <%= [current_admin_user.first_name, current_admin_user.last_name].join(" ") %>
      </div>
      <div class="text-xs text-muted-foreground truncate"><%= current_admin_user.role.humanize %></div>
    </div>
  </div>
</div>

<!-- Navigation -->
<nav class="flex-1 px-6 py-8 overflow-y-auto">
  <div class="space-y-6">
    <!-- Main Navigation -->
    <div class="space-y-2">
      <%= render partial: 'layouts/admin/shared/nav_item', locals: {
        name: "Dashboard",
        path: admin_dashboard_index_path,
        icon: "dashboard",
        current: controller_name == "dashboard"
      } %>

      <%= render partial: 'layouts/admin/shared/nav_item', locals: {
        name: "Pages",
        path: admin_pages_path,
        icon: "pages",
        current: controller_name == "pages"
      } %>

      <%= render partial: 'layouts/admin/shared/nav_item', locals: {
        name: "Pods",
        path: admin_pods_path,
        icon: "pods",
        current: controller_name == "pods"
      } %>

      <%= render partial: 'layouts/admin/shared/nav_item', locals: {
        name: "Blogs",
        path: admin_blogs_path,
        icon: "posts",
        current: controller_name == "blogs"
      } %>

      <%= render partial: 'layouts/admin/shared/nav_item', locals: {
        name: "Users",
        path: admin_admin_users_path,
        icon: "users",
        current: controller_name == "admin_users"
      } %>
    </div>

    <div class="border-t border-sidebar-border py-4 mb-0">
      <%= render partial: 'layouts/admin/shared/nav_item', locals: {
        name: "Enquiries",
        path: admin_enquiries_path,
        icon: "enquiries",
        current: controller_name == "enquiries"
      } %>
    </div>


    <div class="border-t border-sidebar-border py-4 mb-0">
      <%= render partial: 'layouts/admin/shared/nav_item', locals: {
        name: "Settings",
        path: admin_settings_path,
        icon: "settings",
        current: controller_name == "settings"
      } %>
    </div>

    <!-- User Actions -->
    <div class="border-t border-sidebar-border pt-6">
      <div class="text-xs font-semibold text-muted-foreground uppercase tracking-wide mb-3">Account</div>
      <div class="space-y-2">
        <%= link_to edit_admin_admin_user_path(current_admin_user), class: "group flex items-center gap-3 px-3 py-2.5 text-sm font-medium rounded-xl transition-all duration-200 ease-in-out text-sidebar-foreground hover:bg-sidebar-accent hover:text-sidebar-accent-foreground" do %>
          <div class="flex items-center justify-center h-5 w-5 flex-shrink-0">
            <%= admin_icon("user", class: "h-5 w-5 text-muted-foreground group-hover:text-sidebar-accent-foreground transition-colors duration-200") %>
          </div>
          <span class="truncate">Profile</span>
        <% end %>

        <!-- Theme Toggle -->
        <button type="button"
                data-action="click->admin--admin-layout#toggleTheme"
                data-admin--admin-layout-target="themeToggle"
                class="group flex items-center gap-3 px-3 py-2.5 text-sm font-medium rounded-xl transition-all duration-200 ease-in-out text-sidebar-foreground hover:bg-sidebar-accent hover:text-sidebar-accent-foreground w-full text-left">
          <div class="flex items-center justify-center h-5 w-5 flex-shrink-0">
            <svg class="h-5 w-5 dark:hidden text-muted-foreground group-hover:text-sidebar-accent-foreground transition-colors duration-200" fill="currentColor" viewBox="0 0 20 20">
              <path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z" />
            </svg>
            <svg class="h-5 w-5 hidden dark:block text-muted-foreground group-hover:text-sidebar-accent-foreground transition-colors duration-200" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z" clip-rule="evenodd" />
            </svg>
          </div>
          <span class="truncate">Toggle Theme</span>
        </button>

        <%= button_to destroy_admin_user_session_path, method: :delete,
                      class: "group flex items-center gap-3 px-3 py-2.5 text-sm font-medium rounded-xl transition-all duration-200 ease-in-out text-sidebar-foreground hover:bg-sidebar-accent hover:text-sidebar-accent-foreground w-full text-left" do %>
          <div class="flex items-center justify-center h-5 w-5 flex-shrink-0">
            <%= action_icon("logout", class: "h-5 w-5 text-muted-foreground group-hover:text-sidebar-accent-foreground transition-colors duration-200") %>
          </div>
          <span class="truncate">Sign out</span>
        <% end %>
      </div>
    </div>
  </div>
</nav>
